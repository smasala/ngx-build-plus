"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const core_1 = require("@angular-devkit/core");
const path = require("path");
const build_angular_1 = require("@angular-devkit/build-angular");
const webpackMerge = require('webpack-merge');
class DevServerBuilder extends build_angular_1.DevServerBuilder {
    buildWebpackConfig(root, projectRoot, host, browserOptions) {
        let config = super.buildWebpackConfig(root, projectRoot, host, browserOptions);
        if (browserOptions.singleBundle) {
            delete config.entry.polyfills;
            delete config.entry.styles;
            delete config.optimization;
        }
        if (browserOptions.extraWebpackConfig) {
            const filePath = path.resolve(core_1.getSystemPath(projectRoot), browserOptions.extraWebpackConfig);
            const additionalConfig = require(filePath);
            config = webpackMerge([config, additionalConfig]);
        }
        return config;
    }
}
exports.DevServerBuilder = DevServerBuilder;
exports.default = DevServerBuilder;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiRDovZGV2L3JlcG9zL25neC1idWlsZC1wbHVzL2xpYi8iLCJzb3VyY2VzIjpbInNyYy9wbHVzLWRldi1zZXJ2ZXIvaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSwrQ0FBc0U7QUFDdEUsNkJBQTZCO0FBRzdCLGlFQUE2STtBQUM3SSxNQUFNLFlBQVksR0FBRyxPQUFPLENBQUMsZUFBZSxDQUFDLENBQUM7QUFPOUMsc0JBQThCLFNBQVEsZ0NBQW9CO0lBRXhELGtCQUFrQixDQUFDLElBQVUsRUFBRSxXQUFpQixFQUFFLElBQThCLEVBQUUsY0FBb0M7UUFFcEgsSUFBSSxNQUFNLEdBQUcsS0FBSyxDQUFDLGtCQUFrQixDQUFDLElBQUksRUFBRSxXQUFXLEVBQUUsSUFBSSxFQUFFLGNBQWMsQ0FBQyxDQUFDO1FBRS9FLElBQUksY0FBYyxDQUFDLFlBQVksRUFBRTtZQUMvQixPQUFPLE1BQU0sQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDO1lBQzlCLE9BQU8sTUFBTSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUM7WUFDM0IsT0FBTyxNQUFNLENBQUMsWUFBWSxDQUFDO1NBQzVCO1FBRUQsSUFBSSxjQUFjLENBQUMsa0JBQWtCLEVBQUU7WUFDckMsTUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxvQkFBYSxDQUFDLFdBQVcsQ0FBQyxFQUFFLGNBQWMsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO1lBQzdGLE1BQU0sZ0JBQWdCLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQzNDLE1BQU0sR0FBRyxZQUFZLENBQUMsQ0FBQyxNQUFNLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDO1NBQ25EO1FBRUQsT0FBTyxNQUFNLENBQUM7SUFDaEIsQ0FBQztDQUNGO0FBcEJELDRDQW9CQztBQUVELGtCQUFlLGdCQUFnQixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGF0aCwgZ2V0U3lzdGVtUGF0aCwgdmlydHVhbEZzIH0gZnJvbSAnQGFuZ3VsYXItZGV2a2l0L2NvcmUnO1xyXG5pbXBvcnQgKiBhcyBwYXRoIGZyb20gJ3BhdGgnO1xyXG5pbXBvcnQgKiBhcyBmcyBmcm9tICdmcyc7XHJcblxyXG5pbXBvcnQgeyBEZXZTZXJ2ZXJCdWlsZGVyIGFzIERldlNlcnZlckJ1aWxkZXJCYXNlLCBCcm93c2VyQnVpbGRlclNjaGVtYSBhcyBCcm93c2VyQnVpbGRlclNjaGVtYUJhc2UgICB9IGZyb20gJ0Bhbmd1bGFyLWRldmtpdC9idWlsZC1hbmd1bGFyJztcclxuY29uc3Qgd2VicGFja01lcmdlID0gcmVxdWlyZSgnd2VicGFjay1tZXJnZScpO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBCcm93c2VyQnVpbGRlclNjaGVtYSBleHRlbmRzIEJyb3dzZXJCdWlsZGVyU2NoZW1hQmFzZSB7XHJcbiAgZXh0cmFXZWJwYWNrQ29uZmlnOiBzdHJpbmc7XHJcbiAgc2luZ2xlQnVuZGxlOiBib29sZWFuO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgRGV2U2VydmVyQnVpbGRlciBleHRlbmRzIERldlNlcnZlckJ1aWxkZXJCYXNlIHtcclxuXHJcbiAgYnVpbGRXZWJwYWNrQ29uZmlnKHJvb3Q6IFBhdGgsIHByb2plY3RSb290OiBQYXRoLCBob3N0OiB2aXJ0dWFsRnMuSG9zdDxmcy5TdGF0cz4sIGJyb3dzZXJPcHRpb25zOiBCcm93c2VyQnVpbGRlclNjaGVtYSk6IGFueSB7XHJcbiAgICBcclxuICAgIGxldCBjb25maWcgPSBzdXBlci5idWlsZFdlYnBhY2tDb25maWcocm9vdCwgcHJvamVjdFJvb3QsIGhvc3QsIGJyb3dzZXJPcHRpb25zKTtcclxuXHJcbiAgICBpZiAoYnJvd3Nlck9wdGlvbnMuc2luZ2xlQnVuZGxlKSB7XHJcbiAgICAgIGRlbGV0ZSBjb25maWcuZW50cnkucG9seWZpbGxzO1xyXG4gICAgICBkZWxldGUgY29uZmlnLmVudHJ5LnN0eWxlcztcclxuICAgICAgZGVsZXRlIGNvbmZpZy5vcHRpbWl6YXRpb247XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGlmIChicm93c2VyT3B0aW9ucy5leHRyYVdlYnBhY2tDb25maWcpIHtcclxuICAgICAgY29uc3QgZmlsZVBhdGggPSBwYXRoLnJlc29sdmUoZ2V0U3lzdGVtUGF0aChwcm9qZWN0Um9vdCksIGJyb3dzZXJPcHRpb25zLmV4dHJhV2VicGFja0NvbmZpZyk7XHJcbiAgICAgIGNvbnN0IGFkZGl0aW9uYWxDb25maWcgPSByZXF1aXJlKGZpbGVQYXRoKTtcclxuICAgICAgY29uZmlnID0gd2VicGFja01lcmdlKFtjb25maWcsIGFkZGl0aW9uYWxDb25maWddKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gY29uZmlnO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgRGV2U2VydmVyQnVpbGRlcjsiXX0=