"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const build_angular_1 = require("@angular-devkit/build-angular");
const core_1 = require("@angular-devkit/core");
const path = require("path");
const webpackMerge = require('webpack-merge');
class PlusBuilder extends build_angular_1.BrowserBuilder {
    buildWebpackConfig(root, projectRoot, host, options) {
        let config = super.buildWebpackConfig(root, projectRoot, host, options);
        if (options.singleBundle) {
            delete config.entry.polyfills;
            delete config.optimization;
        }
        if (options.singleBundle && options.bundleStyles !== false) {
            delete config.entry.styles;
        }
        if (options.extraWebpackConfig) {
            const filePath = path.resolve(core_1.getSystemPath(projectRoot), options.extraWebpackConfig);
            const additionalConfig = require(filePath);
            config = webpackMerge([config, additionalConfig]);
        }
        return config;
    }
}
exports.PlusBuilder = PlusBuilder;
exports.default = PlusBuilder;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiRDovZGV2L3JlcG9zL25neC1idWlsZC1wbHVzL2xpYi8iLCJzb3VyY2VzIjpbInNyYy9wbHVzL2luZGV4LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsaUVBQStGO0FBQy9GLCtDQUFzRTtBQUV0RSw2QkFBNkI7QUFHN0IsTUFBTSxZQUFZLEdBQUcsT0FBTyxDQUFDLGVBQWUsQ0FBQyxDQUFDO0FBRTlDLGlCQUF5QixTQUFRLDhCQUFjO0lBRTdDLGtCQUFrQixDQUNoQixJQUFVLEVBQ1YsV0FBaUIsRUFDakIsSUFBOEIsRUFDOUIsT0FBMEI7UUFHMUIsSUFBSSxNQUFNLEdBQUcsS0FBSyxDQUFDLGtCQUFrQixDQUFDLElBQUksRUFBRSxXQUFXLEVBQUUsSUFBSSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBRXhFLElBQUksT0FBTyxDQUFDLFlBQVksRUFBRTtZQUN4QixPQUFPLE1BQU0sQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDO1lBQzlCLE9BQU8sTUFBTSxDQUFDLFlBQVksQ0FBQztTQUM1QjtRQUVELElBQUksT0FBTyxDQUFDLFlBQVksSUFBSSxPQUFPLENBQUMsWUFBWSxLQUFLLEtBQUssRUFBRTtZQUMxRCxPQUFPLE1BQU0sQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDO1NBQzVCO1FBRUQsSUFBSSxPQUFPLENBQUMsa0JBQWtCLEVBQUU7WUFDOUIsTUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxvQkFBYSxDQUFDLFdBQVcsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO1lBQ3RGLE1BQU0sZ0JBQWdCLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQzNDLE1BQU0sR0FBRyxZQUFZLENBQUMsQ0FBQyxNQUFNLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDO1NBQ25EO1FBRUQsT0FBTyxNQUFNLENBQUM7SUFDaEIsQ0FBQztDQUNGO0FBNUJELGtDQTRCQztBQUVELGtCQUFlLFdBQVcsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJyb3dzZXJCdWlsZGVyLCBOb3JtYWxpemVkQnJvd3NlckJ1aWxkZXJTY2hlbWEgfSBmcm9tICdAYW5ndWxhci1kZXZraXQvYnVpbGQtYW5ndWxhcic7XHJcbmltcG9ydCB7IFBhdGgsIHZpcnR1YWxGcywgZ2V0U3lzdGVtUGF0aCB9IGZyb20gJ0Bhbmd1bGFyLWRldmtpdC9jb3JlJztcclxuaW1wb3J0ICogYXMgZnMgZnJvbSAnZnMnO1xyXG5pbXBvcnQgKiBhcyBwYXRoIGZyb20gJ3BhdGgnO1xyXG5pbXBvcnQgeyBQbHVzQnVpbGRlclNjaGVtYSB9IGZyb20gJy4vc2NoZW1hJztcclxuXHJcbmNvbnN0IHdlYnBhY2tNZXJnZSA9IHJlcXVpcmUoJ3dlYnBhY2stbWVyZ2UnKTtcclxuXHJcbmV4cG9ydCBjbGFzcyBQbHVzQnVpbGRlciBleHRlbmRzIEJyb3dzZXJCdWlsZGVyICB7XHJcblxyXG4gIGJ1aWxkV2VicGFja0NvbmZpZyhcclxuICAgIHJvb3Q6IFBhdGgsXHJcbiAgICBwcm9qZWN0Um9vdDogUGF0aCxcclxuICAgIGhvc3Q6IHZpcnR1YWxGcy5Ib3N0PGZzLlN0YXRzPixcclxuICAgIG9wdGlvbnM6IFBsdXNCdWlsZGVyU2NoZW1hLFxyXG4gICkge1xyXG5cclxuICAgIGxldCBjb25maWcgPSBzdXBlci5idWlsZFdlYnBhY2tDb25maWcocm9vdCwgcHJvamVjdFJvb3QsIGhvc3QsIG9wdGlvbnMpO1xyXG5cclxuICAgIGlmIChvcHRpb25zLnNpbmdsZUJ1bmRsZSkge1xyXG4gICAgICBkZWxldGUgY29uZmlnLmVudHJ5LnBvbHlmaWxscztcclxuICAgICAgZGVsZXRlIGNvbmZpZy5vcHRpbWl6YXRpb247XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKG9wdGlvbnMuc2luZ2xlQnVuZGxlICYmIG9wdGlvbnMuYnVuZGxlU3R5bGVzICE9PSBmYWxzZSkge1xyXG4gICAgICBkZWxldGUgY29uZmlnLmVudHJ5LnN0eWxlcztcclxuICAgIH1cclxuICAgIFxyXG4gICAgaWYgKG9wdGlvbnMuZXh0cmFXZWJwYWNrQ29uZmlnKSB7XHJcbiAgICAgIGNvbnN0IGZpbGVQYXRoID0gcGF0aC5yZXNvbHZlKGdldFN5c3RlbVBhdGgocHJvamVjdFJvb3QpLCBvcHRpb25zLmV4dHJhV2VicGFja0NvbmZpZyk7XHJcbiAgICAgIGNvbnN0IGFkZGl0aW9uYWxDb25maWcgPSByZXF1aXJlKGZpbGVQYXRoKTtcclxuICAgICAgY29uZmlnID0gd2VicGFja01lcmdlKFtjb25maWcsIGFkZGl0aW9uYWxDb25maWddKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gY29uZmlnO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgUGx1c0J1aWxkZXI7XHJcbiJdfQ==